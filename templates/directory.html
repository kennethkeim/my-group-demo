{% extends "layout.html" %}


{% block title %} My Group Directory {% endblock %}


{% block navbar %}
<!-- Events and Directory buttons -->
<form class="form-inline" action="/events" method="get">
    <button type="submit" class="btn" id="evbtn"><i class="far fa-calendar-alt"></i> Events</button>
</form>
<form class="form-inline" action="/directory" method="get">
    <button type="submit" class="btn" id="dirbtn"><i class="far fa-address-card"></i> Directory</button>
</form>
{% endblock %}



{% block navbar_nav %}
<!-- add contact and logout button -->
<li class="nav-item">
    <button class="btn mt-4 mt-sm-auto" type="button" id="addcontact_btn"><i class="fas fa-plus"></i> add contact</button>
</li>
<li class="nav-item">
    <form class="form-inline" action="/logout" method="post">
        <button type="submit" class="btn mt-3 mt-sm-auto" id="logout_btn"><i class="fas fa-sign-out-alt"></i> logout</button>
    </form>
</li>
{% endblock %}






{% block modals %}

<!-- confirm delete event modal -->
<div class="modal fade" tabindex="-1" role="dialog" id="delcontact_modal">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <!-- close modal button -->
                <button type="button" data-toggle="popover" class="close" data-dismiss="modal" aria-label="Close">
                    <i class="far fa-times-circle fa-sm"></i>
                </button>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to delete this?</p>
            </div>
            <div id="del_buttons">
                <button type="button" class="btn btn-sm" id="del_nope" data-toggle="modal" data-target="#delcontact_modal"><i class="fas fa-undo-alt"></i> nope</button>
                <button type="button" id="delcontact_confirm" class="btn btn-sm" data-toggle="modal" data-target="#delcontact_modal"><i class="fas fa-trash-alt"></i> delete</button>
            </div>
        </div>
    </div>
</div>




<!-- ADD Contact Modal -->
<div class="modal fade" tabindex="-1" role="dialog" id="addcontact_modal">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Add New Contact</h5>
                <!-- close modal button -->
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <i class="far fa-times-circle fa-sm"></i>
                </button>
            </div>
            <form id="addcontact_form">
                <div class="modal-body">

                    <div class="form-group">
                       <label for="firstName">First Name</label>
                       <input type="text" name="firstName" id="firstName" required class="form-control">
                    </div>

                    <div class="form-group">
                       <label for="lastName">Last Name</label>
                       <input type="text" name="lastName" id="lastName" required class="form-control">
                    </div>

                    <div class="form-group">
                       <label for="phone0">Primary Phone (Husband's phone if married)</label>
                       <input type="text" name="phone0" id="phone0" required class="form-control" placeholder="000-000-0000">
                    </div>

                    <div class="form-group">
                       <label for="phone1">Secondary Phone (Wife's phone if married) <small class="label_help">optional</small></label>
                       <input type="text" name="phone1" id="phone1" class="form-control" placeholder="000-000-0000">
                    </div>

                    <div class="form-group">
                       <label for="addrLine0">Address Line One</label>
                       <input type="text" name="addrLine0" id="addrLine0" required class="form-control">
                    </div>

                    <div class="form-group">
                       <label for="addrLine1">Address Line Two <small class="label_help">optional</small></label>
                       <input type="text" name="addrLine1" id="addrLine1" class="form-control">
                    </div>

                    <div class="form-group">
                       <label for="city">City</label>
                       <input type="text" name="city" id="city" required class="form-control">
                    </div>

                    <div class="form-group">
                       <label for="state">State</label>
                       <input type="text" name="state" id="state" required class="form-control">
                    </div>

                    <div class="form-group">
                       <label for="postal">Postal</label>
                       <input type="text" name="postal" id="postal" required class="form-control">
                    </div>

                    <button type="submit" class="btn">Submit</button>
                </div> <!-- modal body -->
            </form>
        </div> <!-- modal content -->
    </div> <!-- modal dialog -->
</div> <!-- modal -->






<!-- EDIT Contact Modal -->
<div class="modal fade" tabindex="-1" role="dialog" id="editcontact_modal">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Edit New Contact</h5>
                <!-- close modal button -->
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <i class="far fa-times-circle fa-sm"></i>
                </button>
            </div>
            <form id="editcontact_form">
                <div class="modal-body">

                    <div class="form-group">
                       <label for="firstNameEdit">First Name</label>
                       <input type="text" name="firstName" id="firstNameEdit" required class="form-control">
                    </div>

                    <div class="form-group">
                       <label for="lastNameEdit">Last Name</label>
                       <input type="text" name="lastName" id="lastNameEdit" required class="form-control">
                    </div>

                    <div class="form-group">
                       <label for="phone0Edit">Primary Phone (Husband's phone if married)</label>
                       <input type="text" name="phone0" id="phone0Edit" required class="form-control" placeholder="000-000-0000">
                    </div>

                    <div class="form-group">
                       <label for="phone1Edit">Secondary Phone (Wife's phone if married) <small class="label_help">optional</small></label>
                       <input type="text" name="phone1" id="phone1Edit" class="form-control" placeholder="000-000-0000">
                    </div>

                    <div class="form-group">
                       <label for="addrLine0Edit">Address Line One</label>
                       <input type="text" name="addrLine0" id="addrLine0Edit" required class="form-control">
                    </div>

                    <div class="form-group">
                       <label for="addrLine1Edit">Address Line Two <small class="label_help">optional</small></label>
                       <input type="text" name="addrLine1" id="addrLine1Edit" class="form-control">
                    </div>

                    <div class="form-group">
                       <label for="cityEdit">City</label>
                       <input type="text" name="city" id="cityEdit" required class="form-control">
                    </div>

                    <div class="form-group">
                       <label for="stateEdit">State</label>
                       <input type="text" name="state" id="stateEdit" required class="form-control">
                    </div>

                    <div class="form-group">
                       <label for="postalEdit">Postal</label>
                       <input type="text" name="postal" id="postalEdit" required class="form-control">
                    </div>

                    <button type="submit" class="btn">Submit</button>
                </div> <!-- modal body -->
            </form>
        </div> <!-- modal content -->
    </div> <!-- modal dialog -->
</div> <!-- modal -->

{% endblock %}





{% block main %}
<!-- List of all the contacts -->
<div class='container'>
    <h1>People</h1>
    <ul class='list-group' id='dir_list_group'>
        <div class='row justify-content-center'>

            <!-- iterate over each contact -->
            {% for contact in contacts %}
                <div class='col-md-7 col-sm-8'>
                    <li class='list-group-item dir_li'>
                        <a href="#" id="{{ contact.id }}" class="popoverSelector" role='button' data-toggle='popover' tabindex='0'><h6 class='dir_li_h6'>{{ contact.last_name }}, {{ contact.first_name }}</h6></a>
                        {% if contact.email %}
                            <a href='mailto:{{ contact.email }}' target='_blank'>{{ contact.email }}</a>
                            <br>
                        {% endif %}
                        <!-- if there is a seconary phone number, assign the male female images/icons to the corresponding number -->
                        <!-- secondary phone number always means it's a couple -->
                        {% if contact.phone1 %}
                            <a href='tel:{{ contact.phone0 }}' target='_blank'>
                                <img src="{{ url_for('static', filename='images/male.png') }}"> {{ contact.phone0 }}
                            </a>
                            <a href='tel:{{ contact.phone1 }}' target='_blank'>
                                <img src="{{ url_for('static', filename='images/female.png') }}"> {{ contact.phone1 }}
                            </a>
                        {% endif %}
                        <!-- else just show the primary phone number -->
                        {% if not contact.phone1 %}
                            <a href='tel:{{ contact.phone0 }}' target='_blank'>{{ contact.phone0 }}</a>
                        {% endif %}
                        <p>
                            {{ contact.addr_line1 }}
                            {% if contact.addr_line2 %}
                                <br>
                                {{ contact.addr_line2 }}
                            {% endif %}
                            <br>
                            {{ contact.city }}, {{ contact.state }} {{ contact.postal }}
                        </p>
                    </li>
                </div>
            {% endfor %}


        </div>
    </ul>
</div>
{% endblock %}


{% block page_specific_js %}
   <script src="{{ url_for('static', filename='directory.js') }}"></script>
{% endblock %}
